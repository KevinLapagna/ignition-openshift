apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  labels:
    ignition.service: gateway
  name: gateway
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      ignition.service: gateway
  template:
    metadata:
      creationTimestamp: null
      labels:
        ignition.service: gateway
    spec:
      containers:
      - args:
        - -n
        - docker-test
        - -m
        - "1024"
        - --
        - wrapper.java.initmemory=512
        - -Dignition.allowunsignedmodules=true
        env:
        - name: ACCEPT_IGNITION_EULA
          value: "Y"
        - name: GATEWAY_ADMIN_PASSWORD_FILE
          value: /run/secrets/gateway-admin-password
        - name: GATEWAY_ADMIN_USERNAME
          value: admin
        - name: IGNITION_EDITION
          value: standard
        - name: TZ
          value: America/Chicago
        image: docker.io/inductiveautomation/ignition:8.1.17
        name: gateway
        ports:
        - containerPort: 8088
        - containerPort: 8043
        resources: {}
        volumeMounts:
        - mountPath: /usr/local/bin/ignition/data
          name: gw-data
      restartPolicy: Always
      volumes:
      - name: gw-data
        persistentVolumeClaim:
          claimName: gw-data
      initContainers:
      - name: init-data
        image: image-registry.openshift-image-registry.svc:5000/ignition/ignition-init:0.0.5
        volumeMounts:
        - mountPath: /usr/local/bin/ignition/data
          name: gw-data
      serviceAccountName: ignition-service-account
status: {}
